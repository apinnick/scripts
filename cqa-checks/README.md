# CQA-checks script

The CQA-checks script produces a Content Quality Assessment report for issues described in the [Modular documentation templates checklist](https://docs.google.com/document/d/13NAUVAby1y1qfT77QFIZrMBhi872e7IEvAC9MUpGXbQ/edit?tab=t.0) and CQA template.

It uses input files generated by the extract-doc-modules script.

This script is a work in progress and might contain errors.

## Usage

1. Run the extract-doc-modules script:
    ````
    $ sh extract-doc-modules.sh \
      --repo-path ../my-repo \
      --assembly-dir myassemblies/ \
      --module-dir mymodules/ \
      ../my-repo/my-guide/master.adoc \
      > modules-list.txt
    ````
    Output: `assemblies.txt`, `nested-assemblies.txt` (if they exist), and `modules-list.txt`.
2. Run the cqa-script:
    ````
    $ sh cqa-checks.sh
    ````
    Output: `CQA-report.md`

## Issues checked by script

**File checks**

- Content type attribute missing or invalid
- ID missing
- Title longer than 10 words found
- '= ' header not followed by blank line
- Admonition with title found
- Image without description found

**Assembly module checks**

- More than one '= ' header found
- No blank line between 'include::' lines
- '=== ' header found
- Block title ('.Text') found
- Nested assembly conditions
  - Missing 'ifdef::context[:parent-context: {context}]'
  - Missing 'ifdef::parent-context[:context: {parent-context}]'
  - Missing 'ifndef::parent-context[:!context:]'

**Procedure module checks**

- '== ' header found
- Procedure longer than 10 steps found
- Block title other than Prerequisites, Procedure, Troubleshooting, Next steps, Additional resources, or Verification found
- More than one procedure found
- Invalid 'Procedure' title found
- 'Procedure' title not followed by list found

**Concept and Reference module checks**

- Block title other than 'Next steps' or 'Additional resources' found
- '=== ' header found

